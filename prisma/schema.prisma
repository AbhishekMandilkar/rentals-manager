generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // Or your chosen database provider
  url      = env("DATABASE_URL")
}

model loan {
  id               String      @id @default(uuid())
  borrowerName     String
  borrowerPhone    String
  amount           Float
  interestRate     Float
  dateLent         DateTime
  dateRepayment    DateTime
  status           loanStatus
  repaymentMode    repaymentMode
  userId           String      // Identifies the user who created the loan
  repayments       repayment[] // Relation to repayment entries
  isDeleted        Boolean     @default(false) // Soft delete flag
  createdAt        DateTime    @default(now())
  updatedAt        DateTime    @updatedAt
}

model repayment {
  id        String    @id @default(uuid())
  loanId    String
  loan      loan      @relation(fields: [loanId], references: [id])
  date      DateTime
  amount    Float
  mode      repaymentMode
  userId    String    // Identifies the user who recorded the repayment
  isDeleted Boolean   @default(false) // Soft delete flag
  createdAt DateTime  @default(now())
}

model tenant {
  id         String        @id @default(uuid())
  name       String
  phone      String
  shopNumber String?       // Optional field
  rent       Float
  payments   rentpayment[] // Relation to rent payments
  isDeleted  Boolean       @default(false) // Soft delete flag
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt
  userId     String        // Identifies the user who created the tenant
}

model rentpayment {
  id        String    @id @default(uuid())
  tenantId  String
  tenant    tenant    @relation(fields: [tenantId], references: [id])
  date      DateTime
  amount    Float
  userId    String    // Identifies the user who recorded the rent payment
  isDeleted Boolean   @default(false) // Soft delete flag
  createdAt DateTime  @default(now())
  paidAt    DateTime? // Optional field
}

enum loanStatus {
  ACTIVE
  REPAID
  OVERDUE
}

enum repaymentMode {
  EMI
  ONETIME
}